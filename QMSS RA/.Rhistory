theme(plot.title = element_text(vjust=2, hjust = 0.5),
legend.position =  'none')
ggplot(data = pct_chg_aug, aes(x = fire_cat, y = as.numeric(Pct_Agg))) +
geom_boxplot(width=.1) +
theme(plot.title = element_text(vjust=2, hjust = 0.5),
legend.position =  'none')
ggplot(data = pct_chg_aug, aes(x = fire_cat, y = as.numeric(Pct_Agg))) +
geom_boxplot() +
theme(plot.title = element_text(vjust=2, hjust = 0.5),
legend.position =  'none')
ggplot(data = pct_chg_aug, aes(y = as.numeric(Pct_Agg))) +
geom_boxplot() +
theme(plot.title = element_text(vjust=2, hjust = 0.5),
legend.position =  'none')
quantile(pct_chg_aug$Pct_Agg)
quantile(poverty_ipums$Pct_Agg)
poverty_ipums %>%
group_by(ZCTA, Pct_Agg) %>%
tally(
)
quantile(poverty_ipums$Pct_Agg)
poverty_ipums %>%
mutate(q = case_when(Pct_Agg > 11.415 ~ 'P', TRUE ~ 'N'))
poverty_ipums %>%
mutate(q = case_when(Pct_Agg > 11.415 ~ 'P', TRUE ~ 'N')) %>%
select(ZCTA, Pct_Agg, q)
poverty_ipums %>%
mutate(q = case_when(Pct_Agg > 11.415 ~ 'P', TRUE ~ 'N')) %>%
select(ZCTA, Pct_Agg, q) %>%
group_by(q) %>%
tally()
quantile(poverty_ipums$Pct_Agg)
poverty_ipums %>%
mutate(q = case_when(Pct_Agg > 11.415 ~ 'Pov>75', TRUE ~ 'Pov<75')) %>%
select(ZCTA, Pct_Agg, q) %>%
group_by(q) %>%
tally()
poverty_ipums %>%
mutate(Poverty_Dummy = case_when(Pct_Agg > 11.415 ~ 'Pov>75', TRUE ~ 'Pov<75')) %>%
select(ZCTA, Pct_Agg, Poverty_Dummy) %>%
group_by(q) %>%
tally()
poverty_ipums %>%
mutate(Poverty_Dummy = case_when(Pct_Agg > 11.415 ~ 'Pov>75', TRUE ~ 'Pov<75')) %>%
select(ZCTA, Pct_Agg, Poverty_Dummy) %>%
group_by(Poverty_Dummy) %>%
tally()
industry_ipums %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2))
industry_ipums %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
select(ZCTA, Pct_Agg)
industry_ipums %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
select(ZCTA5A, Pct_Agg)
industry_ipums %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
mutate(Pct_Agg = ifelse(is.na(Pct_Agg), 0, Pct_Agg))
select(ZCTA5A, Pct_Agg)
industry_ipums %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
mutate(Pct_Agg = ifelse(is.na(Pct_Agg), 0, Pct_Agg)) %>%
select(ZCTA5A, Pct_Agg)
industry_ipums %>%
mutate(ZCTA = substring(ZCTA_NAME, 7)) %>%
filter(ZCTA %in% zcta_cali)
View(industry_ipums)
industry_ipums %>%
mutate(ZCTA = substring(NAME_E, 7)) %>%
filter(ZCTA %in% zcta_cali)
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
mutate(Pct_Agg = ifelse(is.na(Pct_Agg), 0, Pct_Agg)) %>%
select(ZCTA, Pct_Agg)
industry_ipums %>%
mutate(ZCTA = substring(NAME_E, 7)) %>%
filter(ZCTA %in% zcta_cali)
industry_ipums %>%
mutate(ZCTA = substring(NAME_E, 7)) %>%
filter(ZCTA %in% zcta_cali) %>%
select(ZCTA)
industry_ipums %>%
mutate(ZCTA = substring(NAME_E, 7)) %>%
filter(ZCTA %in% zcta_cali) %>%
select(ZCTA, Pct_Agg)
industry_ipums %>%
mutate(ZCTA = substring(NAME_E, 7)) %>%
filter(ZCTA %in% zcta_cali) %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
mutate(Pct_Agg = ifelse(is.na(Pct_Agg), 0, Pct_Agg)) %>%
select(ZCTA, Pct_Agg)
industry_ipums <- industry_ipums %>%
mutate(ZCTA = substring(NAME_E, 7)) %>%
filter(ZCTA %in% zcta_cali) %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
mutate(Pct_Agg = ifelse(is.na(Pct_Agg), 0, Pct_Agg)) %>%
select(ZCTA, Pct_Agg)
View(industry_ipums)
quantile(industry_ipums$Pct_Agg)
poverty_ipums %>%
mutate(Agr_Dummy = case_when(Pct_Agg > 5.725 ~ 'Agr>75', TRUE ~ 'Agr<75')) %>%
select(ZCTA, Pct_Agg, Agr_Dummy) %>%
group_by(Agr_Dummy) %>%
tally()
poverty_ipums %>%
mutate(Poverty_Dummy = case_when(Pct_Agg > 11.415 ~ 'Pov>75', TRUE ~ 'Pov<75')) %>%
select(ZCTA, Pct_Agg, Poverty_Dummy) %>%
group_by(Poverty_Dummy) %>%
tally()
poverty_ipums %>%
mutate(Agr_Dummy = case_when(Pct_Agg >= 5.725 ~ 'Agr>75', TRUE ~ 'Agr<75')) %>%
select(ZCTA, Pct_Agg, Agr_Dummy) %>%
group_by(Agr_Dummy) %>%
tally()
poverty_ipums %>%
mutate(Poverty_Dummy = case_when(Pct_Agg >= 11.415 ~ 'Pov>75', TRUE ~ 'Pov<75')) %>%
select(ZCTA, Pct_Agg, Poverty_Dummy) %>%
group_by(Poverty_Dummy) %>%
tally()
industry_ipums %>%
mutate(Agr_Dummy = case_when(Pct_Agg >= 5.725 ~ 'Agr>75', TRUE ~ 'Agr<75')) %>%
select(ZCTA, Pct_Agg, Agr_Dummy) %>%
group_by(Agr_Dummy) %>%
tally()
source("April26_Ipums.R")
rm(list=ls()[! ls() %in% c("rural_ipums","ruca", "subset_glass",
"poverty_ipums", "pct_chg_aug",
"industry_ipums", "aug_combined",
"buffer1_vec","buffer2_perim_vec",
"buffer2_vec", "cf_bf1", "cf_bf2", "gfperimvec",
"not_zcta", "rural_ruca", "zcta_cali", '%notin%')])
industry_ipums <- read_csv("industry_ipums_2015_2019/industry_ipums.csv")
industry_ipums <- industry_ipums %>%
mutate(ZCTA = substring(NAME_E, 7)) %>%
filter(ZCTA %in% zcta_cali) %>%
mutate(Pct_Agg = as.numeric(Pct_Agg)) %>%
mutate(Pct_Agg = round(Pct_Agg, 2)) %>%
mutate(Pct_Agg = ifelse(is.na(Pct_Agg), 0, Pct_Agg)) %>%
select(ZCTA, Pct_Agg) %>%
mutate(Agr_Dummy = case_when(Pct_Agg >= 5.725 ~ 'Agr>75', TRUE ~ 'Agr<75')) %>%
select(ZCTA, Pct_Agg, Agr_Dummy)
pct_chg_aug <- pct_chg_aug %>%
inner_join(., industry_ipums, by = c("zcta" = "ZCTA"))
View(pct_chg_aug)
source("April26_Ipums.R")
View(poverty_ipums)
source("April26_Ipums.R")
source("April26_Ipums.R")
source("April26_Ipums.R")
rm(list=ls()[! ls() %in% c("rural_ipums","ruca", "subset_glass",
"poverty_ipums", "pct_chg_aug",
"industry_ipums", "aug_combined",
"buffer1_vec","buffer2_perim_vec",
"buffer2_vec", "cf_bf1", "cf_bf2", "gfperimvec",
"not_zcta", "rural_ruca", "zcta_cali", '%notin%')])
View(industry_ipums)
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta,fire_cat) %>%
summarize(med = median(pct_chg_mon_f), .groups = 'drop') %>%
ggplot(data =., aes(x = week, y = med, group = zcta)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=fire_cat), alpha = 0.2) +
geom_point(aes(colour = fire_cat), alpha = 0.8) +
ylim(-50,200) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -50.00, ymax = 150.00 ,
alpha = 0, color= "orange")
View(pct_chg_aug)
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta,fire_cat) %>%
summarize(med = median(pct_chg_mon_z), .groups = 'drop') %>%
ggplot(data =., aes(x = week, y = med, group = zcta)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=fire_cat), alpha = 0.2) +
geom_point(aes(colour = fire_cat), alpha = 0.8) +
ylim(-50,200) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -50.00, ymax = 150.00 ,
alpha = 0, color= "orange")
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta) %>%
group_by(Poverty_Dummy, week) %>%
summarize(med = median(pct_chg_mon_f), .groups ='drop') %>%
ggplot(data =., aes(x = week, y = med, group = Poverty_Dummy)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Poverty_Dummy)) +
geom_point(size = 2) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -2, ymax = 4 ,
alpha = 0, color= "orange")
ggtitle("Median Raw Visits by Date")
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta) %>%
group_by(Agr_Dummy, week) %>%
summarize(med = median(pct_chg_mon_f), .groups ='drop') %>%
ggplot(data =., aes(x = week, y = med, group = Agr_Dummy)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Agr_Dummy)) +
geom_point(size = 2) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -2, ymax = 4 ,
alpha = 0, color= "orange")
ggtitle("Median Raw Visits by Date")
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta) %>%
group_by(Poverty_Dummy, week) %>%
summarize(med = median(pct_chg_mon_f), .groups ='drop') %>%
ggplot(data =., aes(x = week, y = med, group = zcta)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Poverty_Dummy)) +
geom_point(size = 2) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -2, ymax = 4 ,
alpha = 0, color= "orange")
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta) %>%
group_by(zcta, Poverty_Dummy, week) %>%
summarize(med = median(pct_chg_mon_f), .groups ='drop') %>%
ggplot(data =., aes(x = week, y = med, group = zcta)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Poverty_Dummy)) +
geom_point(size = 2) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -2, ymax = 4 ,
alpha = 0, color= "orange")
ggtitle("Median Raw Visits by Date")
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta,Agr_Dummy) %>%
summarize(med = median(pct_chg_mon_f), .groups = 'drop') %>%
ggplot(data =., aes(x = week, y = med, group = zcta)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Agr_Dummy), alpha = 0.2) +
geom_point(aes(colour = Agr_Dummy), alpha = 0.8) +
ylim(-50,200) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -50.00, ymax = 150.00 ,
alpha = 0, color= "orange")
pct_chg_aug %>%
group_by(zcta, Agr_Dummy, fire_cat) %>%
summarize(n = n())
pct_chg_aug %>%
group_by(zcta, Agr_Dummy, fire_cat) %>%
group_by(Agr_Dummy) %>%
summarize(n = n())
pct_chg_aug %>%
group_by(zcta, Agr_Dummy, fire_cat) %>%
distinct(zcta) %>%
group_by(Agr_Dummy) %>%
summarize(n = n())
pct_chg_aug %>%
group_by(zcta, Agr_Dummy, fire_cat) %>%
distinct(zcta, fire_cat) %>%
group_by(Agr_Dummy) %>%
summarize(n = n())
pct_chg_aug %>%
group_by(zcta, Agr_Dummy, fire_cat) %>%
distinct(zcta, fire_cat) %>%
group_by(Agr_Dummy, fire_cat) %>%
summarize(n = n())
pct_chg_aug %>%
group_by(zcta, Agr_Dummy, fire_cat) %>%
distinct(zcta, fire_cat) %>%
group_by(zcta, fire_cat) %>%
summarize(n = n())
pct_chg_aug %>%
group_by(zcta, Agr_Dummy, fire_cat) %>%
distinct(zcta, fire_cat) %>%
group_by(zcta, Agr_Dummy) %>%
summarize(n = n())
View(pct_chg_aug)
View(aug_combined)
aug_combined %>%
filter(zcta %in% zcta_cali) %>%
select(po_name)
aug_combined %>%
filter(zcta %in% zcta_cali) %>%
distinct(po_name) %>%
select(po_name, zcta)
aug_combined %>%
filter(zcta %in% zcta_cali) %>%
distinct(po_name, zcta) %>%
select(po_name, zcta)
aug_combined %>%
filter(zcta %in% zcta_cali) %>%
distinct(po_name, zcta) %>%
select(po_name, zcta) %>%
arrange(po_name)
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta) %>%
group_by(Agr_Dummy, week) %>%
summarize(med = median(pct_chg_mon_z), .groups ='drop') %>%
ggplot(data =., aes(x = week, y = med, group = Agr_Dummy)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Agr_Dummy)) +
geom_point(size = 2) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -2, ymax = 4 ,
alpha = 0, color= "orange")
ggtitle("Median Raw Visits by Date")
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta) %>%
group_by(Agr_Dummy, week) %>%
summarize(med = median(pct_chg_mon_f), .groups ='drop') %>%
ggplot(data =., aes(x = week, y = med, group = Agr_Dummy)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Agr_Dummy)) +
geom_point(size = 2) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -2, ymax = 4 ,
alpha = 0, color= "orange")
ggtitle("Median Raw Visits by Date")
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta) %>%
group_by(Poverty_Dummy, week) %>%
summarize(med = median(pct_chg_mon_f), .groups ='drop') %>%
ggplot(data =., aes(x = week, y = med, group = Poverty_Dummy)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=Poverty_Dummy)) +
geom_point(size = 2) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -2, ymax = 4 ,
alpha = 0, color= "orange")
ggtitle("Median Raw Visits by Date")
View(pct_chg_aug)
summary(lm(pct_chg_mon_f ~ fire_cat + Poverty_Dummy + Pct_Agg_P))
summary(lm(pct_chg_mon_f ~ fire_cat + Poverty_Dummy + Pct_Agg_P, data = pct_chg_aug))
summary(lm(pct_chg_mon_f ~ fire_cat + Poverty_Dummy + Pct_Agg_P + Pct_Agg_I + Pct_Agg_P, data = pct_chg_aug))
summary(lm(pct_chg_mon_f ~ fire_cat + Poverty_Dummy + Pct_Agg_P + Pct_Agg_I + Pct_Agg_P + Pct_Agg_I * Pct_Agg_P, data = pct_chg_aug))
summary(lm(pct_chg_mon_f ~ fire_cat + Poverty_Dummy + Pct_Agg_P + Pct_Agg_I + Pct_Agg_P + Pct_Agg_I * Pct_Agg_P + Rural_Dummy_R, data = pct_chg_aug))
summary(lm(pct_chg_mon_f ~ fire_cat + Poverty_Dummy + Pct_Agg_P + Pct_Agg_I + Pct_Agg_P + Pct_Agg_I * Pct_Agg_P + Rural_Dummy_R + week + week*Rural_Dummy_R, data = pct_chg_aug))
summary(lm(pct_chg_mon_f ~ fire_cat , data = pct_chg_aug))
summary(lm(pct_chg_mon_f ~ fire_cat + week, data = pct_chg_aug))
################################################################################################
# IMPORT PACKAGES
## #############################################################################################
library(tidyverse)
library(sp)
library(sf)
library(foreign)
library(zipzcta)
library(lubridate)
library(plotly)
library(ipumsr)
library(png)
################################################################################################
# SET WORKING DIRECTORY
## #############################################################################################
setwd("/Volumes/22/SafeGraph_Mobility_GlassFire/QMSS RA")
library(imager)
im<-load.image("California_Map.png")
plot(im)
pp <- readPNG("California_Map.png")
pp
plot.new()
rasterImage(pp,0,0,1,1)
knitr::opts_chunk$set(echo = TRUE)
plot.new()
rasterImage(pp,0,0,1,1)
pp1 <- readPNG("California_Map.png")
pp2 <- readPNG("Cali_Map_Zoom.png")
plot.new()
rasterImage(pp2,0,0,1,1)
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta,fire_cat) %>%
summarize(med = median(pct_chg_mon_f), .groups = 'drop') %>%
ggplot(data =., aes(x = week, y = med, group = zcta)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=fire_cat), alpha = 0.2) +
geom_point(aes(colour = fire_cat), alpha = 0.8) +
ylim(-50,200) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -50.00, ymax = 150.00 ,
alpha = 0, color= "orange")
source("April26_Ipums.R")
rm(list=ls()[! ls() %in% c("rural_ipums","ruca", "subset_glass",
"poverty_ipums", "pct_chg_aug",
"industry_ipums", "aug_combined",
"buffer1_vec","buffer2_perim_vec",
"buffer2_vec", "cf_bf1", "cf_bf2", "gfperimvec",
"not_zcta", "rural_ruca", "zcta_cali", '%notin%', 'pp1', 'pp2')])
plot.new()
rasterImage(pp,0,0,1,1)
plot.new()
rasterImage(pp1,0,0,1,1)
plot.new()
rasterImage(pp2,0,0,1,1)
pct_chg_aug %>%
na.omit() %>%
group_by(week,zcta,fire_cat) %>%
summarize(med = median(pct_chg_mon_f), .groups = 'drop') %>%
ggplot(data =., aes(x = week, y = med, group = zcta)) +
scale_color_manual(values=c('Blue','Green', 'Red')) +
geom_line(aes(colour=fire_cat), alpha = 0.2) +
geom_point(aes(colour = fire_cat), alpha = 0.8) +
ylim(-50,200) +
scale_x_date(breaks = "1 week", limits = as.Date(c("2020-08-31", "2020-10-12"))) +# week of Oct 12
theme(axis.text.x = element_text(angle = 0)) +
labs(x="Date", y="Median Percent Change") +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.line = element_line(colour = "black"))  +
annotate("rect", xmin = as.Date("2020-09-21"), xmax = as.Date("2020-10-12"),
ymin = -50.00, ymax = 150.00 ,
alpha = 0, color= "orange")
knitr::opts_chunk$set(echo = TRUE)
source("Safegraph_Script.R")
rm(list=ls()[! ls() %in% c("rural_ipums","ruca", "subset_glass",
"poverty_ipums", "pct_chg_aug",
"industry_ipums", "aug_combined",
"buffer1_vec","buffer2_perim_vec",
"buffer2_vec", "cf_bf1", "cf_bf2", "gfperimvec",
"not_zcta", "rural_ruca", "zcta_cali", '%notin%', 'pp1', 'pp2')])
plot.new()
rasterImage(pp1,0,0,1,1)
plot.new()
rasterImage(pp2,0,0,1,1)
